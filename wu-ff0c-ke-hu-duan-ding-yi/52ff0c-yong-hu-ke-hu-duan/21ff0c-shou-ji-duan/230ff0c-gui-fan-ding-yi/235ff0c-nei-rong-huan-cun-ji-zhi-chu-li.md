* [ ] # 内容缓存处理机制

| 方式 | 说明 |  |
| :--- | :--- | :--- |
| 缓存分类 | 1. app缓存 |  |
|  | 2. 固定缓存 |  |
|  | 3. 可手动清理的缓存。 |  |
|  | 4. 不可手动清理的缓存 |  |
|  | 5. 临时缓存。 |  |
| 临时缓存 | 1. 定义：退出该功能模块就清除之前的缓存。也就是说下次进入该功能模块，需要重新获取一次数据。 |  |
|  | 2. 图片、文字、伴奏、在线预览文件。 |  |
|  | 3. 主要针对3级以下界面 |  |
| **用户手动清理** | 1. 下载伴奏文件 |  |
|  | 2. 本地消息 |  |
|  | 3. 可发布作品缓存 |  |
|  | 4. 图片缓存 |  |
|  | 5. 预览作品文件 |  |
| 定时自动清理 | 1. 定义：通过设定一个固定的时间，或者根据用户使用周期灵活设定时间来清理缓存 |  |
|  | 2.  动态：7天内缓存数据 |  |
|  | 3. 主要针对一级2级列表 |  |
| 定量自动清理 | 1. 定义：一般是设定一个容量上限，采用堆栈的设计原理进行缓存清理，溢出堆栈的旧数据将自动清除。 |  |
|  | 2.动态：缓存过去加载50条容器数据 |  |

| 缓存功能 | 缓存内容 | 缓存策略 |
| :--- | :--- | :--- |
| 社区 | 头像缩略图 |  |
|  | 封面缩略图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
| 动态 | 头像缩略图 |  |
|  | 文字 |  |
|  | 封面缩略图 |  |
|  | 浏览视频详情 |  |
| 活动 | 活动封面缩略图 |  |
|  | 活动背景缩略图 |  |
|  | 文字 |  |
|  | 头像详情 |  |
|  | 浏览视频详情 |  |
| 排行榜 | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 封面缩略图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
| 直播间 | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 消息 |  |
|  | 背景缩略图 |  |
| 资料 | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 标签 |  |
|  | 背景缩略图 |  |
|  | 文字 |  |
| 曲库列表 | 头像缩略图 |  |
|  | 封面缩略图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
| 个人主页 | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 封面缩略图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
| 本地作品 | 本地作品文件 |  |
|  | 文字 |  |
|  | 封面缩略图 |  |
|  | 头像详情 |  |
| 消息 | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 礼物缩略图 |  |
|  | 礼物动画 |  |
|  | 消息图片缩略图 |  |
|  | 消息体图片详情图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
|  | 语音 |  |
| 预览作品 | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 封面缩略图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
| 下载伴奏文件 | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 封面缩略图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
|  | 伴奏文件 |  |
| 相册 | 照片缩略图 |  |
|  | 照片详情 |  |
| UGC | 头像缩略图 |  |
|  | 头像详情 |  |
|  | 封面缩略图 |  |
|  | 文字 |  |
|  | 浏览视频详情 |  |
|  | 评论 |  |
| 储物箱、商店 | 礼物、挂坠缩略图 |  |
|  | 礼物、挂坠详情图 |  |
|  | 礼物、挂坠详情动效 |  |
|  | 文字 |  |

![](/assets/内容缓存1.png)![](/assets/内容缓存2.png)



